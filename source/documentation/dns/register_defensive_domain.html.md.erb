---
owner_slack: "#operations-engineering-alerts"
title: Register New Defensive Domain
last_reviewed_on: 2024-10-16
review_in: 6 months
---

# Register New Defensive Domain

This document explains the process of registering a defensive domain at the Ministry of Justice.

Security owns the policy for [Defensive Domain Registrations](https://security-guidance.service.justice.gov.uk/defensive-domain-registration/#defensive-domain-registrations). 

Operations Engineering doesn't own the decisions around what should be a defensive domains, or what requires a defensive domains. We just ensure that the policy is implemented when a requirement is justified.

## Pre-requisites

- List of defensive domains that need to be registered
- Approval from Security Team
- Access to MoJDSD AWS Route53

## Register domain

Follow [AWS Route53 documenation to regsiter domain via the console](https://docs.aws.amazon.com/Route53/latest/DeveloperGuide/domain-register.html).

If we are unable to register a domain as it is already owned by someone else, report that back to Requester and Security.

## Create hostedzones in DNS repository

Registering a domain will automatically create a Hostedzone in AWS Route53. These steps are for adding the Hostedzone to management by [DNS](https://github.com/ministryofjustice/dns), along with the standard configuration of DNS records that all defensive domains must have.

-  Add new Hostedzone `.yaml` file to `hostedzones` as per the usual process.

- Add the following configuration which will add all the standard defensive domain records:

```
---
'':
  - ttl: 300
    type: CAA
    values:
      - flags: 0
        tag: iodef
        value: mailto:certificates@digital.justice.gov.uk
      - flags: 0
        tag: issue
        value: ;
  - ttl: 300
    type: MX
    value:
      exchange: .
      preference: 0
  - ttl: 172800
    type: NS
    values:
      - ns-xxxx.awsdns-xx.org.
      - ns-xxxx.awsdns-xx.co.uk.
      - ns-xxx.awsdns-xx.com.
      - ns-xxx.awsdns-xx.net.
  - ttl: 300
    type: TXT
    value: v=spf1 -all
'*._domainkey':
  ttl: 300
  type: TXT
  value: v=DKIM1\; p=
_dmarc:
  ttl: 300
  type: TXT
  value: v=DMARC1\;p=reject\;sp=reject\;rua=mailto:dmarc-rua@dmarc.service.gov.uk\;
```

**Note - You must update NS records in the example with actual NS records from Route53 that were created on registration.**

- Raise PR for changes as per the normal process.

- Repeat process for all domains registered.

- Notify Requester and Security when completed.
